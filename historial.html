<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Historial de Liga</title>
  <link rel="stylesheet" href="estilos.css">
  <link rel="icon" href="icono_torneo.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="icono_torneo.ico">
  <meta name="theme-color" content="#000000">
</head>
<body>
  <nav class="menu">
    <a href="index.html">INICIO</a>
    <a href="liga.html">LIGA</a>
    <a href="torneoparejas.html">PAREJAS</a>
    <a href="historial.html" class="activo">HISTORIAL</a>
  </nav>

  <main>
    <h1>Historial de Liga</h1>
    <div id="historial-liga"></div>
  </main>

  <footer>
    <p>Desarrollado por SDD</p>
  </footer>

  <script>
    function mostrarHistorialLiga() {
      const contenedor = document.getElementById('historial-liga');
      const historial = JSON.parse(localStorage.getItem('historialLiga')) || [];

      if (historial.length === 0) {
        contenedor.innerHTML = "<p>No hay datos guardados a√∫n.</p>";
        return;
      }

      let html = "<table>";
      html += `<tr><th>#</th><th>Nombre</th><th>PJ</th><th>PG</th><th>PE</th><th>PP</th><th>%PG</th><th>%PE</th><th>%PP</th></tr>`;

      historial.sort((a, b) => b.pg - a.pg); // Ordenar por Partidos Ganados
      historial.forEach((jugador, i) => {
        const pj = jugador.pj;
        const pg = jugador.pg;
        const pe = jugador.pe;
        const pp = jugador.pp;
        const porcentaje = n => pj ? ((n / pj) * 100).toFixed(1) + "%" : "0%";
        html += `<tr>
          <td>${i + 1}</td>
          <td>${jugador.nombre}</td>
          <td>${pj}</td>
          <td>${pg}</td>
          <td>${pe}</td>
          <td>${pp}</td>
          <td>${porcentaje(pg)}</td>
          <td>${porcentaje(pe)}</td>
          <td>${porcentaje(pp)}</td>
        </tr>`;
      });

      html += "</table>";
      contenedor.innerHTML = html;
    }

    mostrarHistorialLiga();
  </script>
</body>
</html>